{
  "kind": "QueryPlan",
  "node": {
    "kind": "Sequence",
    "nodes": [
      {
        "kind": "Fetch",
        "serviceName": "reviews",
        "variableUsages": [
          "upc",
          "body",
          "updatedReview"
        ],
        "operation": "mutation($upc:String!$body:String!$updatedReview:UpdateReviewInput!){reviewProduct(upc:$upc body:$body){__typename ...on Furniture{upc}}updateReview(review:$updatedReview){id body}}"
      },
      {
        "kind": "Fetch",
        "serviceName": "accounts",
        "variableUsages": [
          "username",
          "password"
        ],
        "operation": "mutation($username:String!$password:String!){login(username:$username password:$password){__typename id}}"
      },
      {
        "kind": "Flatten",
        "path": [
          "login"
        ],
        "node": {
          "kind": "Fetch",
          "serviceName": "reviews",
          "requires": [
            {
              "kind": "InlineFragment",
              "typeCondition": "User",
              "selections": [
                {
                  "kind": "Field",
                  "name": "__typename"
                },
                {
                  "kind": "Field",
                  "name": "id"
                }
              ]
            }
          ],
          "variableUsages": [],
          "operation": "query($representations:[_Any!]!){_entities(representations:$representations){...on User{reviews{product{__typename ...on Book{__typename isbn}...on Furniture{upc}}}}}}"
        }
      },
      {
        "kind": "Flatten",
        "path": [
          "login",
          "reviews",
          "@",
          "product"
        ],
        "node": {
          "kind": "Fetch",
          "serviceName": "product",
          "requires": [
            {
              "kind": "InlineFragment",
              "typeCondition": "Book",
              "selections": [
                {
                  "kind": "Field",
                  "name": "__typename"
                },
                {
                  "kind": "Field",
                  "name": "isbn"
                }
              ]
            }
          ],
          "variableUsages": [],
          "operation": "query($representations:[_Any!]!){_entities(representations:$representations){...on Book{upc}}}"
        }
      },
      {
        "kind": "Fetch",
        "serviceName": "reviews",
        "variableUsages": [
          "reviewId"
        ],
        "operation": "mutation($reviewId:ID!){deleteReview(id:$reviewId)}"
      }
    ]
  }
}
